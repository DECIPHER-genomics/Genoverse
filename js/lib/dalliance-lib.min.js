(function(){function D(){}function z(){this.was=[0]}function C(a,b,c){this.hufts=new Int32Array(4320);this.window=new Uint8Array(c);this.end=c;this.checkfn=b;this.mode=0;this.reset(a,null);this.index=this.table=this.left=0;this.blens=null;this.bb=new Int32Array(1);this.tb=new Int32Array(1);this.codes=new E;this.check=this.write=this.read=this.bitb=this.bitk=this.last=0;this.inftree=new F}function E(){}function F(){}function y(a,b,c,d,h){if(0!=h){if(!a)throw"Undef src";if(!c)throw"Undef dest";if(0==
b&&h==a.length)c.set(a,d);else if(W)a=a.subarray(b,b+h),c.set(a,d);else if(1==a.BYTES_PER_ELEMENT&&100<h)a=new Uint8Array(a.buffer,a.byteOffset+b,h),c.set(a,d);else for(var e=0;e<h;++e)c[d+e]=a[b+e]}}function K(a){for(var b="",c=-1,d,h;++c<a.length;)d=a.charCodeAt(c),h=c+1<a.length?a.charCodeAt(c+1):0,55296<=d&&56319>=d&&56320<=h&&57343>=h&&(d=65536+((d&1023)<<10)+(h&1023),c++),127>=d?b+=String.fromCharCode(d):2047>=d?b+=String.fromCharCode(192|d>>>6&31,128|d&63):65535>=d?b+=String.fromCharCode(224|
d>>>12&15,128|d>>>6&63,128|d&63):2097151>=d&&(b+=String.fromCharCode(240|d>>>18&7,128|d>>>12&63,128|d>>>6&63,128|d&63));a=Array(b.length>>2);for(c=0;c<a.length;c++)a[c]=0;for(c=0;c<8*b.length;c+=8)a[c>>5]|=(b.charCodeAt(c/8)&255)<<24-c%32;b=8*b.length;a[b>>5]|=128<<24-b%32;a[(b+64>>9<<4)+15]=b;b=Array(80);c=1732584193;d=-271733879;h=-1732584194;for(var e=271733878,g=-1009589776,f=0;f<a.length;f+=16){for(var k=c,m=d,p=h,q=e,n=g,l=0;80>l;l++){if(16>l)b[l]=a[f+l];else{var t=b[l-3]^b[l-8]^b[l-14]^b[l-
16];b[l]=t<<1|t>>>31}var t=c<<5|c>>>27,s;s=20>l?d&h|~d&e:40>l?d^h^e:60>l?d&h|d&e|h&e:d^h^e;t=A(A(t,s),A(A(g,b[l]),20>l?1518500249:40>l?1859775393:60>l?-1894007588:-899497514));g=e;e=h;h=d<<30|d>>>2;d=c;c=t}c=A(c,k);d=A(d,m);h=A(h,p);e=A(e,q);g=A(g,n)}a=[c,d,h,e,g];b="";for(c=0;c<32*a.length;c+=8)b+=String.fromCharCode(a[c>>5]>>>24-c%32&255);a=b;b="";c=a.length;for(d=0;d<c;d+=3)for(h=a.charCodeAt(d)<<16|(d+1<c?a.charCodeAt(d+1)<<8:0)|(d+2<c?a.charCodeAt(d+2):0),e=0;4>e;e++)b=8*d+6*e>8*a.length?b+"":
b+"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charAt(h>>>6*(3-e)&63);return b}function A(a,b){var c=(a&65535)+(b&65535);return(a>>16)+(b>>16)+(c>>16)<<16|c&65535}function L(a,b){this.block=a;this.offset=b}function H(a,b,c){var d=4294967296*(a[b+6]&255)+16777216*(a[b+5]&255)+65536*(a[b+4]&255)+256*(a[b+3]&255)+(a[b+2]&255);a=a[b+1]<<8|a[b];return 0!=d||0!=a||c?new L(d,a):null}function M(a,b){b=Math.min(b||1,a.byteLength-50);for(var c=[],d=[0],h=0;d[0]<b;){var e=new Uint8Array(a,
d[0],12),g=e[11]<<8|e[10];var e=a,f=12+g+d[0],k=Math.min(65536,a.byteLength-12-g-d[0]),g=d,e=f?k?new Uint8Array(e,f,k):new Uint8Array(e,f,e.byteLength-f):new Uint8Array(e),k=new D;k.inflateInit(15,!0);k.next_in=e;k.next_in_index=0;k.avail_in=e.length;for(var e=[],m=0;;){var p=new Uint8Array(32E3);k.next_out=p;k.next_out_index=0;k.avail_out=p.length;var q=k.inflate(0);if(0!=q&&1!=q&&-5!=q)throw k.msg;if(0!=k.avail_out){var n=new Uint8Array(p.length-k.avail_out);y(p,0,n,0,p.length-k.avail_out);p=n}e.push(p);
m+=p.length;if(1==q||-5==q)break}g&&(g[0]=(f||0)+k.next_in_index);if(1==e.length)e=e[0].buffer;else{f=new Uint8Array(m);for(k=g=0;k<e.length;++k)m=e[k],y(m,0,f,g,m.length),g+=m.length;e=f.buffer}d[0]+=8;h+=e.byteLength;c.push(e)}if(1==c.length)return c[0];d=new Uint8Array(h);for(e=h=0;e<c.length;++e)f=new Uint8Array(c[e]),y(f,0,d,h,f.length),h+=f.length;return d.buffer}function N(a,b){this.minv=a;this.maxv=b}function X(a,b){var c,d=[];--b;d.push(0);for(c=1+(a>>26);c<=1+(b>>26);++c)d.push(c);for(c=
9+(a>>23);c<=9+(b>>23);++c)d.push(c);for(c=73+(a>>20);c<=73+(b>>20);++c)d.push(c);for(c=585+(a>>17);c<=585+(b>>17);++c)d.push(c);for(c=4681+(a>>14);c<=4681+(b>>14);++c)d.push(c);return d}function G(a){this.blob=a}function B(a,b,c,d){d||("object"===typeof b?(d=b,b=void 0):d={});this.url=a;this.start=b||0;c&&(this.end=c);this.opts=d}function O(a){if(!a)return null;for(var b=new Uint8Array(a.length),c=0;c<b.length;++c)b[c]=a.charCodeAt(c);return b.buffer}function P(a,b){var c=new ArrayBuffer(8),d=new Uint8Array(c),
c=new Float32Array(c);d[0]=a[b];d[1]=a[b+1];d[2]=a[b+2];d[3]=a[b+3];return c[0]}function u(a,b){return a[b+3]<<24|a[b+2]<<16|a[b+1]<<8|a[b]}function Q(a,b){return a[b+1]<<8|a[b]}function Y(a,b){return a[b]}function I(){}function R(a,b,c,d,h){function e(a){if(!a)return d(null,"Couldn't access BAM");a=M(a,a.byteLength);a=new Uint8Array(a);var b=u(a,0);if(21840194!=b)return d(null,"Not a BAM file, magic=0x"+b.toString(16));for(var c=u(a,4),e="",b=0;b<c;++b)e+=String.fromCharCode(a[b+8]);e=u(a,c+8);c+=
12;g.chrToIndex={};g.indexToChr=[];for(b=0;b<e;++b){for(var f=u(a,c),h="",k=0;k<f-1;++k)h+=String.fromCharCode(a[c+4+k]);u(a,c+f+4);g.chrToIndex[h]=b;0==h.indexOf("chr")?g.chrToIndex[h.substring(3)]=b:g.chrToIndex["chr"+h]=b;g.indexToChr.push(h);c=c+8+f}if(g.indices)return d(g)}var g=new I;g.data=a;g.bai=b;g.indexChunks=c;var f=g.indexChunks?g.indexChunks.minBlockIndex:1E9;if(g.indexChunks){b=g.indexChunks.chunks;g.indices=[];for(var k=0;k<b.length;k++)g.indices[k]=null;g.data.slice(0,f).fetch(e)}else g.bai.fetch(function(b){var k,
q,n;if(b){var l=new Uint8Array(b),t=u(l,0);if(21578050!=t)b=d(null,"Not a BAI file, magic=0x"+t.toString(16));else{t=u(l,4);g.indices=[];for(var s=8,w=0;w<t;++w){var J=s;k=l;var r=n=J;q=u(k,r);for(var r=r+4,v=0;v<q;++v){u(k,r);var x=u(k,r+4),r=r+(8+16*x)}for(var v=u(k,r),r=r+4,x=1E9,y=r,A=0;A<v;++A){var z=H(k,y),y=y+8;if(z){k=z.block;0<z.offset&&(k+=65536);k<x&&(x=k);break}}r+=8*v;k=x;n=r-n;s+=n;f=Math.min(k,f);0<q&&(g.indices[w]=new Uint8Array(b,J,s-J))}b=!0}}else b="Couldn't access BAI";!0!==b?
g.bai.url&&"undefined"===typeof h?(g.bai.url=g.data.url.replace(/.bam$/,".bai"),R(a,g.bai,c,d,!0)):d(null,b):g.data.slice(0,f).fetch(e)})}function Z(){}var x=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535],aa=[96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,192,80,7,10,0,8,96,0,8,32,0,9,160,0,8,0,0,8,128,0,8,64,0,9,224,80,7,6,0,8,88,0,8,24,0,9,144,83,7,59,0,8,120,0,8,56,0,9,208,81,7,17,0,8,104,0,8,40,0,9,176,0,8,8,0,8,136,0,8,72,0,9,240,80,7,4,0,8,84,0,8,20,85,8,227,
83,7,43,0,8,116,0,8,52,0,9,200,81,7,13,0,8,100,0,8,36,0,9,168,0,8,4,0,8,132,0,8,68,0,9,232,80,7,8,0,8,92,0,8,28,0,9,152,84,7,83,0,8,124,0,8,60,0,9,216,82,7,23,0,8,108,0,8,44,0,9,184,0,8,12,0,8,140,0,8,76,0,9,248,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,196,81,7,11,0,8,98,0,8,34,0,9,164,0,8,2,0,8,130,0,8,66,0,9,228,80,7,7,0,8,90,0,8,26,0,9,148,84,7,67,0,8,122,0,8,58,0,9,212,82,7,19,0,8,106,0,8,42,0,9,180,0,8,10,0,8,138,0,8,74,0,9,244,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,
54,0,9,204,81,7,15,0,8,102,0,8,38,0,9,172,0,8,6,0,8,134,0,8,70,0,9,236,80,7,9,0,8,94,0,8,30,0,9,156,84,7,99,0,8,126,0,8,62,0,9,220,82,7,27,0,8,110,0,8,46,0,9,188,0,8,14,0,8,142,0,8,78,0,9,252,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,194,80,7,10,0,8,97,0,8,33,0,9,162,0,8,1,0,8,129,0,8,65,0,9,226,80,7,6,0,8,89,0,8,25,0,9,146,83,7,59,0,8,121,0,8,57,0,9,210,81,7,17,0,8,105,0,8,41,0,9,178,0,8,9,0,8,137,0,8,73,0,9,242,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,202,81,7,13,
0,8,101,0,8,37,0,9,170,0,8,5,0,8,133,0,8,69,0,9,234,80,7,8,0,8,93,0,8,29,0,9,154,84,7,83,0,8,125,0,8,61,0,9,218,82,7,23,0,8,109,0,8,45,0,9,186,0,8,13,0,8,141,0,8,77,0,9,250,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,198,81,7,11,0,8,99,0,8,35,0,9,166,0,8,3,0,8,131,0,8,67,0,9,230,80,7,7,0,8,91,0,8,27,0,9,150,84,7,67,0,8,123,0,8,59,0,9,214,82,7,19,0,8,107,0,8,43,0,9,182,0,8,11,0,8,139,0,8,75,0,9,246,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,206,81,7,15,0,8,103,0,8,39,0,9,
174,0,8,7,0,8,135,0,8,71,0,9,238,80,7,9,0,8,95,0,8,31,0,9,158,84,7,99,0,8,127,0,8,63,0,9,222,82,7,27,0,8,111,0,8,47,0,9,190,0,8,15,0,8,143,0,8,79,0,9,254,96,7,256,0,8,80,0,8,16,84,8,115,82,7,31,0,8,112,0,8,48,0,9,193,80,7,10,0,8,96,0,8,32,0,9,161,0,8,0,0,8,128,0,8,64,0,9,225,80,7,6,0,8,88,0,8,24,0,9,145,83,7,59,0,8,120,0,8,56,0,9,209,81,7,17,0,8,104,0,8,40,0,9,177,0,8,8,0,8,136,0,8,72,0,9,241,80,7,4,0,8,84,0,8,20,85,8,227,83,7,43,0,8,116,0,8,52,0,9,201,81,7,13,0,8,100,0,8,36,0,9,169,0,8,4,0,8,132,
0,8,68,0,9,233,80,7,8,0,8,92,0,8,28,0,9,153,84,7,83,0,8,124,0,8,60,0,9,217,82,7,23,0,8,108,0,8,44,0,9,185,0,8,12,0,8,140,0,8,76,0,9,249,80,7,3,0,8,82,0,8,18,85,8,163,83,7,35,0,8,114,0,8,50,0,9,197,81,7,11,0,8,98,0,8,34,0,9,165,0,8,2,0,8,130,0,8,66,0,9,229,80,7,7,0,8,90,0,8,26,0,9,149,84,7,67,0,8,122,0,8,58,0,9,213,82,7,19,0,8,106,0,8,42,0,9,181,0,8,10,0,8,138,0,8,74,0,9,245,80,7,5,0,8,86,0,8,22,192,8,0,83,7,51,0,8,118,0,8,54,0,9,205,81,7,15,0,8,102,0,8,38,0,9,173,0,8,6,0,8,134,0,8,70,0,9,237,80,7,
9,0,8,94,0,8,30,0,9,157,84,7,99,0,8,126,0,8,62,0,9,221,82,7,27,0,8,110,0,8,46,0,9,189,0,8,14,0,8,142,0,8,78,0,9,253,96,7,256,0,8,81,0,8,17,85,8,131,82,7,31,0,8,113,0,8,49,0,9,195,80,7,10,0,8,97,0,8,33,0,9,163,0,8,1,0,8,129,0,8,65,0,9,227,80,7,6,0,8,89,0,8,25,0,9,147,83,7,59,0,8,121,0,8,57,0,9,211,81,7,17,0,8,105,0,8,41,0,9,179,0,8,9,0,8,137,0,8,73,0,9,243,80,7,4,0,8,85,0,8,21,80,8,258,83,7,43,0,8,117,0,8,53,0,9,203,81,7,13,0,8,101,0,8,37,0,9,171,0,8,5,0,8,133,0,8,69,0,9,235,80,7,8,0,8,93,0,8,29,0,
9,155,84,7,83,0,8,125,0,8,61,0,9,219,82,7,23,0,8,109,0,8,45,0,9,187,0,8,13,0,8,141,0,8,77,0,9,251,80,7,3,0,8,83,0,8,19,85,8,195,83,7,35,0,8,115,0,8,51,0,9,199,81,7,11,0,8,99,0,8,35,0,9,167,0,8,3,0,8,131,0,8,67,0,9,231,80,7,7,0,8,91,0,8,27,0,9,151,84,7,67,0,8,123,0,8,59,0,9,215,82,7,19,0,8,107,0,8,43,0,9,183,0,8,11,0,8,139,0,8,75,0,9,247,80,7,5,0,8,87,0,8,23,192,8,0,83,7,51,0,8,119,0,8,55,0,9,207,81,7,15,0,8,103,0,8,39,0,9,175,0,8,7,0,8,135,0,8,71,0,9,239,80,7,9,0,8,95,0,8,31,0,9,159,84,7,99,0,8,127,
0,8,63,0,9,223,82,7,27,0,8,111,0,8,47,0,9,191,0,8,15,0,8,143,0,8,79,0,9,255],ba=[80,5,1,87,5,257,83,5,17,91,5,4097,81,5,5,89,5,1025,85,5,65,93,5,16385,80,5,3,88,5,513,84,5,33,92,5,8193,82,5,9,90,5,2049,86,5,129,192,5,24577,80,5,2,87,5,385,83,5,25,91,5,6145,81,5,7,89,5,1537,85,5,97,93,5,24577,80,5,4,88,5,769,84,5,49,92,5,12289,82,5,13,90,5,3073,86,5,193,192,5,24577],ca=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],da=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,
3,3,3,4,4,4,4,5,5,5,5,0,112,112],ea=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],fa=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13];D.prototype.inflateInit=function(a,b){a||(a=15);b&&(b=!1);this.istate=new z;return this.istate.inflateInit(this,b?-a:a)};D.prototype.inflate=function(a){return null==this.istate?-2:this.istate.inflate(this,a)};D.prototype.inflateEnd=function(){if(null==this.istate)return-2;var a=
istate.inflateEnd(this);this.istate=null;return a};D.prototype.inflateSync=function(){return istate.inflateSync(this)};D.prototype.inflateSetDictionary=function(a,b){return istate.inflateSetDictionary(this,a,b)};z.prototype.inflateReset=function(a){if(null==a||null==a.istate)return-2;a.total_in=a.total_out=0;a.msg=null;a.istate.mode=0!=a.istate.nowrap?7:0;a.istate.blocks.reset(a,null);return 0};z.prototype.inflateEnd=function(a){null!=this.blocks&&this.blocks.free(a);this.blocks=null;return 0};z.prototype.inflateInit=
function(a,b){this.blocks=a.msg=null;nowrap=0;0>b&&(b=-b,nowrap=1);if(8>b||15<b)return this.inflateEnd(a),-2;this.wbits=b;a.istate.blocks=new C(a,0!=a.istate.nowrap?null:this,1<<b);this.inflateReset(a);return 0};z.prototype.inflate=function(a,b){var c,d;if(null==a||null==a.istate||null==a.next_in)return-2;b=4==b?-5:0;for(c=-5;;)switch(a.istate.mode){case 0:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;if(8!=((a.istate.method=a.next_in[a.next_in_index++])&15)){a.istate.mode=13;a.msg="unknown compression method";
a.istate.marker=5;break}if((a.istate.method>>4)+8>a.istate.wbits){a.istate.mode=13;a.msg="invalid window size";a.istate.marker=5;break}a.istate.mode=1;case 1:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;d=a.next_in[a.next_in_index++]&255;if(0!=((a.istate.method<<8)+d)%31){a.istate.mode=13;a.msg="incorrect header check";a.istate.marker=5;break}if(0==(d&32)){a.istate.mode=7;break}a.istate.mode=2;case 2:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&
255)<<24&4278190080;a.istate.mode=3;case 3:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<16&16711680;a.istate.mode=4;case 4:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=5;case 5:if(0==a.avail_in)return c;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;a.adler=a.istate.need;a.istate.mode=6;return 2;case 6:return a.istate.mode=13,
a.msg="need dictionary",a.istate.marker=0,-2;case 7:c=a.istate.blocks.proc(a,c);if(-3==c){a.istate.mode=13;a.istate.marker=0;break}0==c&&(c=b);if(1!=c)return c;c=b;a.istate.blocks.reset(a,a.istate.was);if(0!=a.istate.nowrap){a.istate.mode=12;break}a.istate.mode=8;case 8:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need=(a.next_in[a.next_in_index++]&255)<<24&4278190080;a.istate.mode=9;case 9:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&
255)<<16&16711680;a.istate.mode=10;case 10:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=(a.next_in[a.next_in_index++]&255)<<8&65280;a.istate.mode=11;case 11:if(0==a.avail_in)return c;c=b;a.avail_in--;a.total_in++;a.istate.need+=a.next_in[a.next_in_index++]&255;if(a.istate.was[0]!=a.istate.need){a.istate.mode=13;a.msg="incorrect data check";a.istate.marker=5;break}a.istate.mode=12;case 12:return 1;case 13:return-3;default:return-2}};z.prototype.inflateSetDictionary=function(a,
b,c){var d=0,h=c;if(null==a||null==a.istate||6!=a.istate.mode)return-2;if(a._adler.adler32(1,b,0,c)!=a.adler)return-3;a.adler=a._adler.adler32(0,null,0,0);h>=1<<a.istate.wbits&&(h=(1<<a.istate.wbits)-1,d=c-h);a.istate.blocks.set_dictionary(b,d,h);a.istate.mode=7;return 0};var ga=[0,0,255,255];z.prototype.inflateSync=function(a){var b,c,d;if(null==a||null==a.istate)return-2;13!=a.istate.mode&&(a.istate.mode=13,a.istate.marker=0);if(0==(b=a.avail_in))return-5;c=a.next_in_index;for(d=a.istate.marker;0!=
b&&4>d;)a.next_in[c]==ga[d]?d++:d=0!=a.next_in[c]?0:4-d,c++,b--;a.total_in+=c-a.next_in_index;a.next_in_index=c;a.avail_in=b;a.istate.marker=d;if(4!=d)return-3;b=a.total_in;c=a.total_out;this.inflateReset(a);a.total_in=b;a.total_out=c;a.istate.mode=7;return 0};z.prototype.inflateSyncPoint=function(a){return null==a||null==a.istate||null==a.istate.blocks?-2:a.istate.blocks.sync_point()};var S=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];C.prototype.reset=function(a,b){b&&(b[0]=this.check);6==this.mode&&
this.codes.free(a);this.read=this.write=this.bitb=this.bitk=this.mode=0;this.checkfn&&(a.adler=this.check=a._adler.adler32(0,null,0,0))};C.prototype.proc=function(a,b){var c,d,h,e,g,f,k;e=a.next_in_index;g=a.avail_in;d=this.bitb;h=this.bitk;f=this.write;for(k=f<this.read?this.read-f-1:this.end-f;;)switch(this.mode){case 0:for(;3>h;){if(0!=g)b=0;else return this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);g--;d|=(a.next_in[e++]&
255)<<h;h+=8}c=d&7;this.last=c&1;switch(c>>>1){case 0:d>>>=3;h-=3;c=h&7;d>>>=c;h-=c;this.mode=1;break;case 1:var m=new Int32Array(1),p=new Int32Array(1),q=[],n=[];c=p;var l=q,t=n;m[0]=9;c[0]=5;l[0]=aa;t[0]=ba;this.codes.init(m[0],p[0],q[0],0,n[0],0,a);d>>>=3;h-=3;this.mode=6;break;case 2:d>>>=3;h-=3;this.mode=3;break;case 3:return d>>>=3,h-=3,this.mode=13,a.msg="invalid block type",b=-3,this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,
b)}break;case 1:for(;32>h;){if(0!=g)b=0;else return this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);g--;d|=(a.next_in[e++]&255)<<h;h+=8}if((~d>>>16&65535)!=(d&65535))return this.mode=13,a.msg="invalid stored block lengths",b=-3,this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);this.left=d&65535;d=h=0;this.mode=0!=this.left?2:0!=this.last?7:0;break;case 2:if(0==
g)return this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,write=f,this.inflate_flush(a,b);if(0==k&&(f==end&&0!=read&&(f=0,k=f<this.read?this.read-f-1:this.end-f),0==k&&(this.write=f,b=this.inflate_flush(a,b),f=this.write,k=f<this.read?this.read-f-1:this.end-f,f==this.end&&0!=this.read&&(f=0,k=f<this.read?this.read-f-1:this.end-f),0==k)))return this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,
b);b=0;c=this.left;c>g&&(c=g);c>k&&(c=k);y(a.next_in,e,this.window,f,c);e+=c;g-=c;f+=c;k-=c;if(0!=(this.left-=c))break;this.mode=0!=this.last?7:0;break;case 3:for(;14>h;){if(0!=g)b=0;else return this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);g--;d|=(a.next_in[e++]&255)<<h;h+=8}this.table=c=d&16383;if(29<(c&31)||29<(c>>5&31))return this.mode=9,a.msg="too many length or distance symbols",b=-3,this.bitb=d,this.bitk=h,a.avail_in=
g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);c=258+(c&31)+(c>>5&31);if(null==this.blens||this.blens.length<c)this.blens=new Int32Array(c);else for(k=0;k<c;k++)this.blens[k]=0;d>>>=14;h-=14;this.index=0;mode=4;case 4:for(;this.index<4+(this.table>>>10);){for(;3>h;){if(0!=g)b=0;else return this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);g--;d|=(a.next_in[e++]&255)<<h;h+=8}this.blens[S[this.index++]]=
d&7;d>>>=3;h-=3}for(;19>this.index;)this.blens[S[this.index++]]=0;this.bb[0]=7;c=this.inftree.inflate_trees_bits(this.blens,this.bb,this.tb,this.hufts,a);if(0!=c)return b=c,-3==b&&(this.blens=null,this.mode=9),this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,write=f,this.inflate_flush(a,b);this.index=0;this.mode=5;case 5:for(;;){c=this.table;if(!(this.index<258+(c&31)+(c>>5&31)))break;for(c=this.bb[0];h<c;){if(0!=g)b=0;else return this.bitb=d,this.bitk=h,a.avail_in=
g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);g--;d|=(a.next_in[e++]&255)<<h;h+=8}c=this.hufts[3*(this.tb[0]+(d&x[c]))+1];p=this.hufts[3*(this.tb[0]+(d&x[c]))+2];if(16>p)d>>>=c,h-=c,this.blens[this.index++]=p;else{k=18==p?7:p-14;for(m=18==p?11:3;h<c+k;){if(0!=g)b=0;else return this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);g--;d|=(a.next_in[e++]&255)<<h;h+=8}d>>>=c;h-=c;m+=d&x[k];d>>>=
k;h-=k;k=this.index;c=this.table;if(k+m>258+(c&31)+(c>>5&31)||16==p&&1>k)return this.blens=null,this.mode=9,a.msg="invalid bit length repeat",b=-3,this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);p=16==p?this.blens[k-1]:0;do this.blens[k++]=p;while(0!=--m);this.index=k}}this.tb[0]=-1;m=new Int32Array(1);p=new Int32Array(1);q=new Int32Array(1);n=new Int32Array(1);m[0]=9;p[0]=6;c=this.table;c=this.inftree.inflate_trees_dynamic(257+
(c&31),1+(c>>5&31),this.blens,m,p,q,n,this.hufts,a);if(0!=c)return-3==c&&(this.blens=null,this.mode=13),b=c,this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);this.codes.init(m[0],p[0],this.hufts,q[0],this.hufts,n[0],a);this.mode=6;case 6:this.bitb=d;this.bitk=h;a.avail_in=g;a.total_in+=e-a.next_in_index;a.next_in_index=e;this.write=f;if(1!=(b=this.codes.proc(this,a,b)))return this.inflate_flush(a,b);b=0;this.codes.free(a);e=a.next_in_index;
g=a.avail_in;d=this.bitb;h=this.bitk;f=this.write;k=f<this.read?this.read-f-1:this.end-f;if(0==this.last){this.mode=0;break}this.mode=7;case 7:this.write=f;b=this.inflate_flush(a,b);f=this.write;if(this.read!=this.write)return this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);mode=12;case 8:return b=1,this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);case 9:return b=
-3,this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b);default:return b=-2,this.bitb=d,this.bitk=h,a.avail_in=g,a.total_in+=e-a.next_in_index,a.next_in_index=e,this.write=f,this.inflate_flush(a,b)}};C.prototype.free=function(a){this.reset(a,null);this.hufts=this.window=null};C.prototype.set_dictionary=function(a,b,c){y(a,b,window,0,c);this.read=this.write=c};C.prototype.sync_point=function(){return 1==this.mode};C.prototype.inflate_flush=
function(a,b){var c,d,h;d=a.next_out_index;h=this.read;c=(h<=this.write?this.write:this.end)-h;c>a.avail_out&&(c=a.avail_out);0!=c&&-5==b&&(b=0);a.avail_out-=c;a.total_out+=c;null!=this.checkfn&&(a.adler=this.check=a._adler.adler32(this.check,this.window,h,c));y(this.window,h,a.next_out,d,c);d+=c;h+=c;h==this.end&&(h=0,this.write==this.end&&(this.write=0),c=this.write-h,c>a.avail_out&&(c=a.avail_out),0!=c&&-5==b&&(b=0),a.avail_out-=c,a.total_out+=c,null!=this.checkfn&&(a.adler=this.check=a._adler.adler32(this.check,
this.window,h,c)),y(this.window,h,a.next_out,d,c),d+=c,h+=c);a.next_out_index=d;this.read=h;return b};E.prototype.init=function(a,b,c,d,h,e,g){this.mode=0;this.lbits=a;this.dbits=b;this.ltree=c;this.ltree_index=d;this.dtree=h;this.dtree_index=e;this.tree=null};E.prototype.proc=function(a,b,c){var d,h,e=0,g=0,f=0,k,m,p,f=b.next_in_index;k=b.avail_in;e=a.bitb;g=a.bitk;m=a.write;for(p=m<a.read?a.read-m-1:a.end-m;;)switch(this.mode){case 0:if(258<=p&&10<=k&&(a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=
f-b.next_in_index,b.next_in_index=f,a.write=m,c=this.inflate_fast(this.lbits,this.dbits,this.ltree,this.ltree_index,this.dtree,this.dtree_index,a,b),f=b.next_in_index,k=b.avail_in,e=a.bitb,g=a.bitk,m=a.write,p=m<a.read?a.read-m-1:a.end-m,0!=c)){this.mode=1==c?7:9;break}this.need=this.lbits;this.tree=this.ltree;this.tree_index=this.ltree_index;this.mode=1;case 1:for(d=this.need;g<d;){if(0!=k)c=0;else return a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,
c);k--;e|=(b.next_in[f++]&255)<<g;g+=8}d=3*(this.tree_index+(e&x[d]));e>>>=this.tree[d+1];g-=this.tree[d+1];h=this.tree[d];if(0==h){this.lit=this.tree[d+2];this.mode=6;break}if(0!=(h&16)){this.get=h&15;this.len=this.tree[d+2];this.mode=2;break}if(0==(h&64)){this.need=h;this.tree_index=d/3+this.tree[d+2];break}if(0!=(h&32)){this.mode=7;break}this.mode=9;b.msg="invalid literal/length code";c=-3;a.bitb=e;a.bitk=g;b.avail_in=k;b.total_in+=f-b.next_in_index;b.next_in_index=f;a.write=m;return a.inflate_flush(b,
c);case 2:for(d=this.get;g<d;){if(0!=k)c=0;else return a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,c);k--;e|=(b.next_in[f++]&255)<<g;g+=8}this.len+=e&x[d];e>>=d;g-=d;this.need=this.dbits;this.tree=this.dtree;this.tree_index=this.dtree_index;this.mode=3;case 3:for(d=this.need;g<d;){if(0!=k)c=0;else return a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,c);k--;e|=(b.next_in[f++]&
255)<<g;g+=8}d=3*(this.tree_index+(e&x[d]));e>>=this.tree[d+1];g-=this.tree[d+1];h=this.tree[d];if(0!=(h&16)){this.get=h&15;this.dist=this.tree[d+2];this.mode=4;break}if(0==(h&64)){this.need=h;this.tree_index=d/3+this.tree[d+2];break}this.mode=9;b.msg="invalid distance code";c=-3;a.bitb=e;a.bitk=g;b.avail_in=k;b.total_in+=f-b.next_in_index;b.next_in_index=f;a.write=m;return a.inflate_flush(b,c);case 4:for(d=this.get;g<d;){if(0!=k)c=0;else return a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,
b.next_in_index=f,a.write=m,a.inflate_flush(b,c);k--;e|=(b.next_in[f++]&255)<<g;g+=8}this.dist+=e&x[d];e>>=d;g-=d;this.mode=5;case 5:for(d=m-this.dist;0>d;)d+=a.end;for(;0!=this.len;){if(0==p&&(m==a.end&&0!=a.read&&(m=0,p=m<a.read?a.read-m-1:a.end-m),0==p&&(a.write=m,c=a.inflate_flush(b,c),m=a.write,p=m<a.read?a.read-m-1:a.end-m,m==a.end&&0!=a.read&&(m=0,p=m<a.read?a.read-m-1:a.end-m),0==p)))return a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,
c);a.window[m++]=a.window[d++];p--;d==a.end&&(d=0);this.len--}this.mode=0;break;case 6:if(0==p&&(m==a.end&&0!=a.read&&(m=0,p=m<a.read?a.read-m-1:a.end-m),0==p&&(a.write=m,c=a.inflate_flush(b,c),m=a.write,p=m<a.read?a.read-m-1:a.end-m,m==a.end&&0!=a.read&&(m=0,p=m<a.read?a.read-m-1:a.end-m),0==p)))return a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,c);c=0;a.window[m++]=this.lit;p--;this.mode=0;break;case 7:7<g&&(g-=8,k++,f--);a.write=m;
c=a.inflate_flush(b,c);m=a.write;if(a.read!=a.write)return a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,c);this.mode=8;case 8:return c=1,a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,c);case 9:return c=-3,a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,c);default:return c=-2,a.bitb=e,a.bitk=g,b.avail_in=k,b.total_in+=
f-b.next_in_index,b.next_in_index=f,a.write=m,a.inflate_flush(b,c)}};E.prototype.free=function(a){};E.prototype.inflate_fast=function(a,b,c,d,h,e,g,f){var k,m,p,q,n,l,t,s,w,u,r,v;l=f.next_in_index;t=f.avail_in;q=g.bitb;n=g.bitk;s=g.write;w=s<g.read?g.read-s-1:g.end-s;a=x[a];u=x[b];do{for(;20>n;)t--,q|=(f.next_in[l++]&255)<<n,n+=8;k=q&a;m=c;p=d;v=3*(p+k);if(0==(b=m[v]))q>>=m[v+1],n-=m[v+1],g.window[s++]=m[v+2],w--;else{do{q>>=m[v+1];n-=m[v+1];if(0!=(b&16)){b&=15;r=m[v+2]+(q&x[b]);q>>=b;for(n-=b;15>
n;)t--,q|=(f.next_in[l++]&255)<<n,n+=8;k=q&u;m=h;p=e;v=3*(p+k);b=m[v];do if(q>>=m[v+1],n-=m[v+1],0!=(b&16)){for(b&=15;n<b;)t--,q|=(f.next_in[l++]&255)<<n,n+=8;k=m[v+2]+(q&x[b]);q>>=b;n-=b;w-=r;if(s>=k)k=s-k,g.window[s++]=g.window[k++],g.window[s++]=g.window[k++],r-=2;else{k=s-k;do k+=g.end;while(0>k);b=g.end-k;if(r>b){r-=b;if(0<s-k&&b>s-k){do g.window[s++]=g.window[k++];while(0!=--b)}else y(g.window,k,g.window,s,b),s+=b;k=0}}do g.window[s++]=g.window[k++];while(0!=--r);break}else if(0==(b&64))k+=
m[v+2],k+=q&x[b],v=3*(p+k),b=m[v];else return f.msg="invalid distance code",r=f.avail_in-t,r=n>>3<r?n>>3:r,t+=r,l-=r,n-=r<<3,g.bitb=q,g.bitk=n,f.avail_in=t,f.total_in+=l-f.next_in_index,f.next_in_index=l,g.write=s,-3;while(1);break}if(0==(b&64)){if(k+=m[v+2],k+=q&x[b],v=3*(p+k),0==(b=m[v])){q>>=m[v+1];n-=m[v+1];g.window[s++]=m[v+2];w--;break}}else{if(0!=(b&32))return r=f.avail_in-t,r=n>>3<r?n>>3:r,t+=r,l-=r,n-=r<<3,g.bitb=q,g.bitk=n,f.avail_in=t,f.total_in+=l-f.next_in_index,f.next_in_index=l,g.write=
s,1;f.msg="invalid literal/length code";r=f.avail_in-t;r=n>>3<r?n>>3:r;t+=r;l-=r;n-=r<<3;g.bitb=q;g.bitk=n;f.avail_in=t;f.total_in+=l-f.next_in_index;f.next_in_index=l;g.write=s;return-3}}while(1)}}while(258<=w&&10<=t);r=f.avail_in-t;r=n>>3<r?n>>3:r;l-=r;g.bitb=q;g.bitk=n-(r<<3);f.avail_in=t+r;f.total_in+=l-f.next_in_index;f.next_in_index=l;g.write=s;return 0};F.prototype.huft_build=function(a,b,c,d,h,e,g,f,k,m,p){var q,n,l,t,s,w,u,r,v;w=0;n=c;do this.c[a[b+w]]++,w++,n--;while(0!=n);if(this.c[0]==
c)return g[0]=-1,f[0]=0;s=f[0];for(l=1;15>=l&&0==this.c[l];l++);t=l;s<l&&(s=l);for(n=15;0!=n&&0==this.c[n];n--);m=n;s>n&&(s=n);f[0]=s;for(f=1<<l;l<n;l++,f<<=1)if(0>(f-=this.c[l]))return-3;if(0>(f-=this.c[n]))return-3;this.c[n]+=f;this.x[1]=l=0;w=1;for(u=2;0!=--n;)this.x[u]=l+=this.c[w],u++,w++;w=n=0;do 0!=(l=a[b+w])&&(this.v[this.x[l]++]=n),w++;while(++n<c);c=this.x[m];w=this.x[0]=n=0;b=-1;r=-s;for(v=u=this.u[0]=0;t<=m;t++)for(a=this.c[t];0!=a--;){for(;t>r+s;){b++;r+=s;v=m-r;v=v>s?s:v;if((q=1<<(l=
t-r))>a+1&&(q-=a+1,u=t,l<v))for(;++l<v&&!((q<<=1)<=this.c[++u]);)q-=this.c[u];v=1<<l;if(1440<this.hn[0]+v)return-3;this.u[b]=u=this.hn[0];this.hn[0]+=v;0!=b?(this.x[b]=n,this.r[0]=l,this.r[1]=s,l=n>>>r-s,this.r[2]=u-this.u[b-1]-l,y(this.r,0,k,3*(this.u[b-1]+l),3)):g[0]=u}this.r[1]=t-r;w>=c?this.r[0]=192:p[w]<d?(this.r[0]=256>this.v[w]?0:96,this.r[2]=this.v[w++]):(this.r[0]=e[this.v[w]-d]+16+64,this.r[2]=h[this.v[w++]-d]);q=1<<t-r;for(l=n>>>r;l<v;l+=q)y(this.r,0,k,3*(u+l),3);for(l=1<<t-1;0!=(n&l);l>>>=
1)n^=l;n^=l;for(l=(1<<r)-1;(n&l)!=this.x[b];)b--,r-=s,l=(1<<r)-1}return 0!=f&&1!=m?-5:0};F.prototype.inflate_trees_bits=function(a,b,c,d,h){this.initWorkArea(19);this.hn[0]=0;a=this.huft_build(a,0,19,19,null,null,c,b,d,this.hn,this.v);if(-3==a)h.msg="oversubscribed dynamic bit lengths tree";else if(-5==a||0==b[0])h.msg="incomplete dynamic bit lengths tree",a=-3;return a};F.prototype.inflate_trees_dynamic=function(a,b,c,d,h,e,g,f,k){this.initWorkArea(288);this.hn[0]=0;e=this.huft_build(c,0,a,257,ca,
da,e,d,f,this.hn,this.v);if(0!=e||0==d[0])return-3==e?k.msg="oversubscribed literal/length tree":-4!=e&&(k.msg="incomplete literal/length tree",e=-3),e;this.initWorkArea(288);e=this.huft_build(c,a,b,0,ea,fa,g,h,f,this.hn,this.v);return 0!=e||0==h[0]&&257<a?(-3==e?k.msg="oversubscribed distance tree":-5==e?(k.msg="incomplete distance tree",e=-3):-4!=e&&(k.msg="empty distance tree with lengths",e=-3),e):0};F.prototype.initWorkArea=function(a){null==this.hn&&(this.hn=new Int32Array(1),this.v=new Int32Array(a),
this.c=new Int32Array(16),this.r=new Int32Array(3),this.u=new Int32Array(15),this.x=new Int32Array(16));this.v.length<a&&(this.v=new Int32Array(a));for(var b=0;b<a;b++)this.v[b]=0;for(b=0;16>b;b++)this.c[b]=0;for(b=0;3>b;b++)this.r[b]=0;y(this.c,0,this.u,0,15);y(this.c,0,this.x,0,16)};var W="function"===typeof(new Uint8Array(1)).subarray;L.prototype.toString=function(){return""+this.block+":"+this.offset};G.prototype.slice=function(a,b){var c;c=this.blob.slice?b?this.blob.slice(a,a+b):this.blob.slice(a):
b?this.blob.webkitSlice(a,a+b):this.blob.webkitSlice(a);return new G(c)};G.prototype.salted=function(){return this};G.prototype.fetch="undefined"!==typeof FileReader?function(a){var b=new FileReader;b.onloadend=function(c){a(O(b.result))};b.readAsBinaryString(this.blob)}:function(a){var b=new FileReaderSync;try{var c=b.readAsArrayBuffer(this.blob);a(c)}catch(d){a(null,d)}};B.prototype.slice=function(a,b){if(0>a)throw"Bad slice "+a;var c=this.start,d=this.end,c=c&&a?c+a:a||c;return new B(this.url,
c,b&&c?c+b-1:d||b-1,this.opts)};var T=0,U=0<=navigator.userAgent.indexOf("Safari")&&0>navigator.userAgent.indexOf("Chrome");B.prototype.fetchAsText=function(a){var b=this;this.getURL().then(function(c){try{var d=new XMLHttpRequest;(U||b.opts.salt)&&0>c.indexOf("?")&&(c=c+"?salt="+K(""+Date.now()+","+ ++T));d.open("GET",c,!0);if(b.end){if(1E8<b.end-b.start)throw"Monster fetch!";d.setRequestHeader("Range","bytes="+b.start+"-"+b.end)}d.onreadystatechange=function(){if(4==d.readyState)return 200==d.status||
206==d.status?a(d.responseText):a(null)};b.opts.credentials&&(d.withCredentials=!0);d.send("")}catch(h){return a(null)}}).fail(function(b){console.log(b);return a(null,b)})};B.prototype.salted=function(){var a=this.opts,b={},c;for(c in a)b[c]=a[c];b.salt=!0;return new B(this.url,this.start,this.end,b)};B.prototype.getURL=function(){return this.opts.resolver?this.opts.resolver(this.url).then(function(a){return"string"===typeof a?a:a.url}):$.Deferred().resolve(this.url)};B.prototype.fetch=function(a,
b){var c=this;b=b||{};var d=b.attempt||1,h=b.truncatedLength;if(3<d)return a(null);this.getURL().then(function(e){try{var g;b.timeout&&!c.opts.credentials&&(g=setTimeout(function(){console.log("timing out "+e);f.abort();return a(null,"Timeout")},b.timeout));var f=new XMLHttpRequest,k;(U||c.opts.salt)&&0>e.indexOf("?")&&(e=e+"?salt="+K(""+Date.now()+","+ ++T));f.open("GET",e,!0);f.overrideMimeType("text/plain; charset=x-user-defined");if(c.end){if(1E8<c.end-c.start)throw"Monster fetch!";f.setRequestHeader("Range",
"bytes="+c.start+"-"+c.end);k=c.end-c.start+1}f.responseType="arraybuffer";f.onreadystatechange=function(){if(4==f.readyState){g&&clearTimeout(g);if(200==f.status||206==f.status){if(f.response){var b=f.response.byteLength;return!k||k==b||h&&b==h?a(f.response):c.fetch(a,{attempt:d+1,truncatedLength:b})}if(f.mozResponseArrayBuffer)return a(f.mozResponseArrayBuffer);b=f.responseText;return!k||k==b.length||h&&b.length==h?a(O(f.responseText)):c.fetch(a,{attempt:d+1,truncatedLength:b.length})}return c.fetch(a,
{attempt:d+1})}};c.opts.credentials&&(f.withCredentials=!0);f.send("")}catch(m){return a(null)}}).fail(function(b){console.log(b);return a(null,b)})};I.prototype.blocksForRange=function(a,b,c){var d=this.indices[a];if(!d)return[];a=X(b,c);for(var h=[],e=0;e<a.length;++e)h[a[e]]=!0;a=[];for(var g=[],e=u(d,0),f=4,k=0;k<e;++k){var m=u(d,f),p=u(d,f+4),f=f+8;if(h[m])for(var q=0;q<p;++q){var n=H(d,f),l=H(d,f+8);(4681>m?g:a).push(new N(n,l));f+=16}else f+=16*p}e=u(d,f);h=null;b=Math.min(b>>14,e-1);c=Math.min(c>>
14,e-1);for(e=b;e<=c;++e)(b=H(d,f+4+8*e))&&(!h||b.block<h.block||b.offset<h.offset)&&(h=b);d=[];if(null!=h)for(e=0;e<g.length;++e)c=g[e],c.maxv.block>=h.block&&c.maxv.offset>=h.offset&&d.push(c);g=d;d=[];for(e=0;e<g.length;++e)d.push(g[e]);for(e=0;e<a.length;++e)d.push(a[e]);d.sort(function(a,b){var c=a.minv.block-b.minv.block;return 0!=c?c:a.minv.offset-b.minv.offset});a=[];if(0<d.length){g=d[0];for(e=1;e<d.length;++e)c=d[e],c.minv.block==g.maxv.block?g=new N(g.minv,c.maxv):(a.push(g),g=c);a.push(g)}return a};
I.prototype.fetch=function(a,b,c,d,h){function e(){if(q>=k.length)return d(p);if(n){var a=new Uint8Array(n),a=g.readBamRecords(a,k[q].minv.offset,p,b,c,f,h);n=null;++q;return a?d(p):e()}var m=k[q],a=m.minv.block;g.data.slice(a,m.maxv.block+65536-a).fetch(function(a){n=M(a,m.maxv.block-m.minv.block+1);return e()})}var g=this;h=h||{};var f=this.chrToIndex[a],k;if(void 0===f)k=[];else{if(null===this.indices[f]&&this.indexChunks.chunks[f]){var m=this.indexChunks.chunks[f];return this.bai.slice(m[0],m[1]).fetch(function(e){e=
new Uint8Array(e);this.indices[f]=e;return this.fetch(a,b,c,d,h)}.bind(this))}(k=this.blocksForRange(f,b,c))||d(null,"Error in index fetch")}var p=[],q=0,n;e()};var V="=ACxGxxxTxxxxxxN".split(""),ha="MIDNSHP=X???????".split("");I.prototype.readBamRecords=function(a,b,c,d,h,e,g){for(;;){var f=u(a,b),f=b+f+4;if(f>=a.length)return!1;var k=new Z,m=u(a,b+4),p=u(a,b+8),q=u(a,b+12),n=(q&65280)>>8,l=q&255,q=u(a,b+16),t=(q&4294901760)>>16,s=q&65535,q=u(a,b+20),w=u(a,b+24),x=u(a,b+28);u(a,b+32);k.segment=this.indexToChr[m];
k.flag=t;k.pos=p;k.mq=n;g.light&&(k.seqLength=q);if(!g.light){0<=w&&(k.nextSegment=this.indexToChr[w],k.nextPos=x);n="";for(p=0;p<l-1;++p)n+=String.fromCharCode(a[b+36+p]);k.readName=n;b=b+36+l;l="";for(p=0;p<s;++p)n=u(a,b),l=l+(n>>4)+ha[n&15],b+=4;k.cigar=l;s="";l=q+1>>1;for(p=0;p<l;++p)n=a[b+p],s+=V[(n&240)>>4],s.length<q&&(s+=V[n&15]);b+=l;k.seq=s;s="";for(p=0;p<q;++p)s+=String.fromCharCode(a[b+p]+33);b+=q;for(k.quals=s;b<f;){s=String.fromCharCode(a[b],a[b+1]);l=String.fromCharCode(a[b+2]);if("A"==
l)l=String.fromCharCode(a[b+3]),b+=4;else if("i"==l||"I"==l)l=u(a,b+3),b+=7;else if("c"==l||"C"==l)l=a[b+3],b+=4;else if("s"==l||"S"==l)l=Q(a,b+3),b+=5;else if("f"==l)l=P(a,b+3),b+=7;else if("Z"==l||"H"==l)for(b+=3,l="";p=a[b++],0!=p;)l+=String.fromCharCode(p);else if("B"==l){l=String.fromCharCode(a[b+3]);p=u(a,b+4);if("i"==l||"I"==l||"f"==l)n=4,t="f"==l?P:u;else if("s"==l||"S"==l)n=2,t=Q;else if("c"==l||"C"==l)n=1,t=Y;else throw"Unknown array type "+l;b+=8;l=[];for(w=0;w<p;++w)l.push(t(a,b)),b+=
n}else throw"Unknown type "+l;k[s]=l}}if(!d||k.pos<=h&&k.pos+q>=d)void 0!==e&&m!=e||c.push(k);if(k.pos>h)return!0;b=f}};window.dallianceLib={URLFetchable:B,BlobFetchable:G,makeBam:function(a,b,c,d,h){a.slice(0,10).fetch(function(e){return e?R(a,b,c,d,h):d(null,"Couldn't access BAM.")},{timeout:5E3})}}})();
